import requests

url = "http://127.0.0.1:5000"

response = requests.get(url)
from bson import ObjectId

# service_name = "openai"
# model_name = "gpt-4.1"
# user_id = "68e553454e05fbc189605af0"
# api_key = ""
# topic_name = "Sample AI Test"
# topic_description = "You are an helpful AI"
# tools = "code_interpreter,web_search"
#
# service = requests.post(url + "/api/service", json={"service_name": service_name, "user_id": user_id, "api_key": api_key})
# agent = requests.post(url + "/api/agent", json={"service_id": service.json()["id"], "model_name": model_name})
# topic = requests.post(url + "/api/topic", json={"agent_id": agent.json()["id"], "topic_name": topic_name, "topic_description": topic_description, "tools": tools})
# context = requests.post(url + "/api/context", json={})
#
#
# thread = requests.post(url + "/api/thread", json={"topic_id": topic.json()["id"], "context_id": context.json()["id"]})
# thread_id = thread.json()["id"]

user_id = "68e553454e05fbc189605ah0"
listings_info = {"id":"68d4f148296b49553935acf3","creator_id":"68d4f0f2296b49547935a9e6","status":"published","status_changed_at":"2025-09-25T00:37:49-07:00","origin_domain":"us","destination_domains":["us"],"publish_count":1,"app_version":"6.32","inventory":{"status":"available","status_changed_at":"2025-09-25T00:37:44-07:00","multi_item":True,"size_quantity_revision":1,"size_quantities":[{"size_id":"XS","quantity_available":984,"quantity_reserved":0,"quantity_sold":0,"size_ref":64,"size_system":"us","size_obj":{"id":"XS","display":"XS","display_with_size_set":"XS","size_system":"us","display_with_size_system":"US XS","display_with_system_and_set":"US XS"},"size_set_tags":["standard"]}]},"catalog":{"category_features":["00829287d97b4e80ef00a955"],"category":"00188975d97b4e80ef00a955","department":"000e8975d97b4e80ef00a955","department_obj":{"id":"000e8975d97b4e80ef00a955","display":"Women","slug":"Women","message_id":"women"},"category_obj":{"id":"00188975d97b4e80ef00a955","display":"Tops","slug":"Tops","message_id":"women_tops"},"category_feature_objs":[{"id":"00829287d97b4e80ef00a955","display":"Muscle Tees","slug":"Muscle_Tees","message_id":"women_tops_muscle_tees"}]},"inventory_unit_id":"68d4f148296b49553935acf4","brand_id":"53d8332f1315515d65000344","brand":"RACHEL Rachel Roy","colors":[{"name":"Black","rgb":"#000000","message_id":"black"}],"condition":"nwt","category":"Tops","cover_shot":{"id":"68d4f14b26184bf63fa83cd9","creator_id":"68d4f0f2296b49547935a9e6","picture":"68d4f14b26184bf63fa83cd9.jpg","path":"posts/2025/09/25/68d4f148296b49553935acf3/m_68d4f14b26184bf63fa83cd9.jpg","path_small":"posts/2025/09/25/68d4f148296b49553935acf3/s_68d4f14b26184bf63fa83cd9.jpg","path_large":"posts/2025/09/25/68d4f148296b49553935acf3/l_68d4f14b26184bf63fa83cd9.jpg","path_webp":"posts/2025/09/25/68d4f148296b49553935acf3/m_wp_68d4f14b26184bf63fa83cd9.webp","path_small_webp":"posts/2025/09/25/68d4f148296b49553935acf3/s_wp_68d4f14b26184bf63fa83cd9.webp","path_large_webp":"posts/2025/09/25/68d4f148296b49553935acf3/l_wp_68d4f14b26184bf63fa83cd9.webp","content_type":"image/jpeg","storage_location":"or","md5_hash":"11fee60453c180fc751c9109b0d45a81","created_at":"2025-09-25T00:37:47-07:00","url":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/m_68d4f14b26184bf63fa83cd9.jpg","url_small":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/s_68d4f14b26184bf63fa83cd9.jpg","url_large":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/l_68d4f14b26184bf63fa83cd9.jpg","url_webp":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/m_wp_68d4f14b26184bf63fa83cd9.webp","url_small_webp":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/s_wp_68d4f14b26184bf63fa83cd9.webp","url_large_webp":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/l_wp_68d4f14b26184bf63fa83cd9.webp","content_type_alternate":"image/webp"},"description":"Color: Blacks\nSize Type: Regular\nSize (Women's): XS\nNeckline: Off the Shoulder\nPattern: Striped\nSleeve Length: Long Sleeve\nStyle: Bodycon\nOccasion: Party/Cocktail\nDress Length: Knee Length\nMaterial: Cotton Blends\nLined: Yes\nZipper: None","original_price_amount":{"val":"119.0","currency_code":"USD","currency_symbol":"$"},"pictures":[{"id":"68d4f14c26184b5397a83cde","creator_id":"68d4f0f2296b49547935a9e6","picture":"68d4f14c26184b5397a83cde.jpg","path":"posts/2025/09/25/68d4f148296b49553935acf3/m_68d4f14c26184b5397a83cde.jpg","path_small":"posts/2025/09/25/68d4f148296b49553935acf3/s_68d4f14c26184b5397a83cde.jpg","path_large":"posts/2025/09/25/68d4f148296b49553935acf3/l_68d4f14c26184b5397a83cde.jpg","path_webp":"posts/2025/09/25/68d4f148296b49553935acf3/m_wp_68d4f14c26184b5397a83cde.webp","path_small_webp":"posts/2025/09/25/68d4f148296b49553935acf3/s_wp_68d4f14c26184b5397a83cde.webp","path_large_webp":"posts/2025/09/25/68d4f148296b49553935acf3/l_wp_68d4f14c26184b5397a83cde.webp","content_type":"image/jpeg","storage_location":"or","md5_hash":"ddb8fdf9717dc12c5bed5651ddb5fee4","created_at":"2025-09-25T00:37:48-07:00","url":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/m_68d4f14c26184b5397a83cde.jpg","url_small":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/s_68d4f14c26184b5397a83cde.jpg","url_large":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/l_68d4f14c26184b5397a83cde.jpg","url_webp":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/m_wp_68d4f14c26184b5397a83cde.webp","url_small_webp":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/s_wp_68d4f14c26184b5397a83cde.webp","url_large_webp":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/l_wp_68d4f14c26184b5397a83cde.webp","content_type_alternate":"image/webp"}],"price_amount":{"val":"22.0","currency_code":"USD","currency_symbol":"$"},"size":"XS","seller_shipping_discount_id":"5fdca5ae6058865bfae42a44","style_tags":["Contemporary"],"type":"multi_item","title":"Rachel Roy Women's Dress Black Size XS Laced Bell-Sleebe Bodycon","assigned_just_in_at":"2025-09-25T00:37:49-07:00","brand_update_count":0,"first_published_at":"2025-09-25T00:37:49-07:00","first_available_at":"2025-09-25T00:37:49-07:00","deal_info":{},"created_at":"2025-09-25T00:37:44-07:00","price":22.0,"original_price":119.0,"like_count":0,"comment_count":0,"has_offer":False,"videos":[],"generated_story_ids":[],"picture_url":"https://d31ahw0cux4dup.cloudfront.net/posts/2025/09/25/68d4f148296b49553935acf3/m_68d4f14b26184bf63fa83cd9.jpg","aggregates":{"shares":0,"comments":0,"likes":0,"active_buyer_offers":0,"active_offers":0},"comments":[],"events":[],"likes":[],"caller_has_offered":False,"offer_data":{},"posh_pass_eligible":False,"creator_username":"1pads25","creator_display_handle":"1pads25","creator_full_name":"Poshmark Hyd","creator_picture_url":"https://d31ahw0cux4dup.cloudfront.net/users/2025/09/25/0/t_68d4f0f4296b49547935a9f1.jpeg","caller_has_liked":False,"category_v2":{"id":"00188975d97b4e80ef00a955","display":"Tops","slug":"Tops","message_id":"women_tops"},"size_obj":{"id":"XS","display":"XS","display_with_size_set":"XS","size_system":"us","display_with_size_system":"US XS","display_with_system_and_set":"US XS"},"brand_obj":{"id":"53d8332f1315515d65000344","canonical_name":"RACHEL Rachel Roy","slug":"RACHEL_Rachel_Roy"},"shipping_discount_type":None,"system_messages":[{"message":"$6.49 shipping on all orders. Bundle multiple items to save even more. <u>Details &raquo;</u>","destination_url":"https://stage.goshd.com/mapp/poshmark_shipping?origin_domain=us&is_authentication_free=False","image_url":"https://dusptrde00x24.cloudfront.net/assets/native_app/icons/icon-shipping-discount@2x.png"},{"message":"Every purchase on Poshmark is protected. Get the item you ordered or get your money back. Otherwise, all sales are final. <u>Details &raquo;</u>","destination_url":"https://stage.goshd.com/mapp/posh_protect","image_url":"https://dusptrde00x24.cloudfront.net/assets/native_app/icons/poshprotect-grey-outline@2x.png"}]}
payload = {
    "user_id": str(ObjectId()),
    "listings_info": {
        "data": listings_info
    }
}
thread = requests.post(url + "/api/thread/new", json=payload)
thread_id = thread.json()["id"]

while True:
    query = input("ASK AI: ")
    if query == "":
        break
    response = requests.post(url + "/api/query/" + thread_id, json={"message": query})
    print("AI Response :", response.json())
